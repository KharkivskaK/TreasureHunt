<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>TH Choose</title>
    <link rel="stylesheet" href="stylesheet.css">
    <style>
        body {
            font-family: Georgia, serif;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* Styling for the button */
        button {
            padding: 10px;
            background-color: #3498db;
            color: #fff;
            cursor: pointer;
            margin-top: 10px;
        }

        /* Styling for the form */
        form {
            margin-top: 20px;
        }
    </style>
</head>
<body>
<div class="main">
    <nav>
        <img src="images/treasurehunt.png" class='logoimg' alt="Logo">
        <ul>
            <li><a href="">Home</a></li>
            <li><a href="">About</a></li>
        </ul>
    </nav>
    <p class="maintext"><b>Now choose the hunt and get started!</b></p>

    <form id="treasureHuntForm">
        <label for="huntSelect">Choose a Treasure Hunt:</label>
        <select id="huntSelect"></select>

        <button type="button" onclick="searchTreasure()">Search Treasure</button>
    </form>

    <script>
        // Function for creating "Search Treasure" buttons and processing their click
        function createTreasureHuntOptions() {
            // Your data with quests in JSON format
            const treasureHuntsData = {
                "treasureHunts": [
                    {
                        "name": "Treasure Hunt 1",
                        "theme": "cars",
                        // There may be other quests from your JSON here
                    },
                    {
                        "name": "Treasure Hunt 2",
                        "theme": "countries",
                    }
                    // Add more treasure hunts as needed
                ]
            };

            const huntSelect = document.getElementById('huntSelect');

            // Check if there is a stored selection in the cookie
            const storedSelection = getCookie('selectedHunt');

            // Populate options
            treasureHuntsData.treasureHunts.forEach(quest => {
                const option = document.createElement('option');
                option.value = quest.name;
                option.text = quest.name;
                huntSelect.appendChild(option);
            });

            // Set the selected option if it was previously stored in the cookie
            if (storedSelection) {
                huntSelect.value = storedSelection;
            }
        }

        // Function for processing the form submission
        function searchTreasure() {
            const selectedHunt = document.getElementById('huntSelect').value;
            alert("Starting treasure hunt: " + selectedHunt);

            // Store the selection in a cookie
            setCookie('selectedHunt', selectedHunt, 30); // 30 days expiration, adjust as needed
        }

        // Function to set a cookie
        function setCookie(name, value, days) {
            const expires = new Date();
            expires.setTime(expires.getTime() + days * 24 * 60 * 60 * 1000);
            document.cookie = name + '=' + value + ';expires=' + expires.toUTCString();
        }

        // Function to get a cookie value by name
        function getCookie(name) {
            const keyValue = document.cookie.match('(^|;) ?' + name + '=([^;]*)(;|$)');
            return keyValue ? keyValue[2] : null;
        }

        // Call the function to create options when the page loads
        window.onload = createTreasureHuntOptions;
    </script>
</div>
<!--<img src="images/pirateship.png" class="shipimg" alt="Ship">-->
</body>
</html>